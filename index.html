<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ –ø–æ –ò–ù–ù</title>
    <style>
        /* –°—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è —Ç–∞–∫–∏–º–∏ –∂–µ –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –∫–æ–¥–µ */
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ ... */
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç-–ü—Ä–æ–≤–µ—Ä–∫–∞</div>
            <nav>
                <ul>
                    <li><a href="#">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="#">–û —Å–µ—Ä–≤–∏—Å–µ</a></li>
                    <li><a href="#">–¢–∞—Ä–∏—Ñ—ã</a></li>
                    <li><a href="#">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <section class="hero">
        <div class="container">
            <h1>–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–∞–≥–æ–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤</h1>
            <p>–ë—ã—Å—Ç—Ä–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∞–Ω–∏–π –ø–æ –ò–ù–ù. –ü–æ–ª—É—á–∏—Ç–µ –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–µ –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥.</p>
        </div>
    </section>
    
    <div class="container">
        <section class="search-section">
            <form class="search-form" id="innForm">
                <div class="form-group">
                    <label for="inn">–í–≤–µ–¥–∏—Ç–µ –ò–ù–ù –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞</label>
                    <div class="input-group">
                        <input type="text" id="inn" placeholder="10 –∏–ª–∏ 12 —Ü–∏—Ñ—Ä" maxlength="12">
                        <button type="submit">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                    </div>
                    <div class="validation-error" id="innError">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ò–ù–ù (10 –∏–ª–∏ 12 —Ü–∏—Ñ—Ä)</div>
                </div>
                <div class="api-selector">
                    <label>–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:</label>
                    <select id="apiSource">
                        <option value="dadata">DaData (–¥–µ–º–æ)</option>
                        <option value="fns">–§–ù–° API</option>
                        <option value="kontur">–ö–æ–Ω—Ç—É—Ä.–§–æ–∫—É—Å</option>
                    </select>
                </div>
            </form>
            
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>–ò–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞...</p>
            </div>
        </section>
        
        <section class="results-section" id="results">
            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </section>
        
        <section class="features">
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <h3>–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</h3>
                <p>–ü–æ–ª—É—á–∏—Ç–µ –ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç –æ –∫–æ–º–ø–∞–Ω–∏–∏ –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üìä</div>
                <h3>–ü–æ–¥—Ä–æ–±–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
                <p>–û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –∫–æ–º–ø–∞–Ω–∏–∏</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üîí</div>
                <h3>–ù–∞–¥–µ–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                <p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üì±</div>
                <h3>–î–æ—Å—Ç—É–ø —Å –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</h3>
                <p>–£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤ –∏ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤</p>
            </div>
        </section>
    </div>
    
    <footer>
        <div class="container footer-content">
            <div class="logo">–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç-–ü—Ä–æ–≤–µ—Ä–∫–∞</div>
            <div class="footer-links">
                <a href="#">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
                <a href="#">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</a>
                <a href="#">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</a>
            </div>
            <p>¬© 2023 –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç-–ü—Ä–æ–≤–µ—Ä–∫–∞. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </footer>
    
    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API
        const API_CONFIG = {
            dadata: {
                url: 'https://suggestions.dadata.ru/suggestions/api/4_1/rs/findById/party',
                token: 'YOUR_DADATA_TOKEN' // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
            },
            fns: {
                url: 'https://api-fns.ru/api/egr',
                key: 'YOUR_FNS_KEY' // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –∫–ª—é—á
            }
        };

        document.getElementById('innForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const inn = document.getElementById('inn').value;
            const apiSource = document.getElementById('apiSource').value;
            const innError = document.getElementById('innError');
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è –ò–ù–ù
            if (!validateINN(inn)) {
                innError.style.display = 'block';
                return;
            }
            
            innError.style.display = 'none';
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').style.display = 'none';
            
            try {
                let companyData;
                
                switch(apiSource) {
                    case 'dadata':
                        companyData = await fetchFromDaData(inn);
                        break;
                    case 'fns':
                        companyData = await fetchFromFNS(inn);
                        break;
                    default:
                        companyData = await fetchFromDaData(inn);
                }
                
                // –°–∫—Ä—ã—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                document.getElementById('loading').style.display = 'none';
                
                // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                displayResults(companyData, inn);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                document.getElementById('loading').style.display = 'none';
                showError('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
            }
        });
        
        function validateINN(inn) {
            const innRegex = /^\d{10}$|^\d{12}$/;
            return innRegex.test(inn);
        }
        
        async function fetchFromDaData(inn) {
            const response = await fetch(API_CONFIG.dadata.url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                    'Authorization': 'Token ' + API_CONFIG.dadata.token
                },
                body: JSON.stringify({ query: inn })
            });
            
            if (!response.ok) {
                throw new Error('–û—à–∏–±–∫–∞ API DaData');
            }
            
            const data = await response.json();
            
            if (!data.suggestions || data.suggestions.length === 0) {
                throw new Error('–ö–æ–º–ø–∞–Ω–∏—è —Å —Ç–∞–∫–∏–º –ò–ù–ù –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
            }
            
            return data.suggestions[0];
        }
        
        async function fetchFromFNS(inn) {
            const url = `${API_CONFIG.fns.url}?req=${inn}&key=${API_CONFIG.fns.key}`;
            const response = await fetch(url);
            
            if (!response.ok) {
                throw new Error('–û—à–∏–±–∫–∞ API –§–ù–°');
            }
            
            const data = await response.json();
            return data;
        }
        
        function displayResults(companyData, inn) {
            const resultsSection = document.getElementById('results');
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∫–æ–º–ø–∞–Ω–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö
            const reliability = calculateReliability(companyData);
            
            let reliabilityBadge;
            let reliabilityText;
            
            switch(reliability) {
                case 'high':
                    reliabilityBadge = 'reliable';
                    reliabilityText = '–ù–∞–¥–µ–∂–Ω—ã–π';
                    break;
                case 'medium':
                    reliabilityBadge = 'medium-risk';
                    reliabilityText = '–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫';
                    break;
                case 'low':
                    reliabilityBadge = 'high-risk';
                    reliabilityText = '–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫';
                    break;
                default:
                    reliabilityBadge = 'medium-risk';
                    reliabilityText = '–¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏';
            }
            
            // –§–æ—Ä–º–∏—Ä—É–µ–º HTML —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
            resultsSection.innerHTML = `
                <div class="results-header">
                    <div class="company-name">${companyData.value || companyData.–ò–ú–Ø_–Æ–õ}</div>
                    <div class="reliability-badge ${reliabilityBadge}">${reliabilityText}</div>
                </div>
                
                <div class="info-grid">
                    <div class="info-card">
                        <h3>–ò–ù–ù</h3>
                        <p>${inn}</p>
                    </div>
                    <div class="info-card">
                        <h3>–û–ì–†–ù</h3>
                        <p>${companyData.data.ogrn || companyData.–û–ì–†–ù || '–ù–µ —É–∫–∞–∑–∞–Ω'}</p>
                    </div>
                    <div class="info-card">
                        <h3>–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å</h3>
                        <p>${companyData.data.address?.value || companyData.–ê–î–†–ï–° || '–ù–µ —É–∫–∞–∑–∞–Ω'}</p>
                    </div>
                    <div class="info-card">
                        <h3>–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å</h3>
                        <p>${companyData.data.management?.name || companyData.–†–£–ö–û–í–û–î–ò–¢–ï–õ–¨ || '–ù–µ —É–∫–∞–∑–∞–Ω'}</p>
                    </div>
                    <div class="info-card">
                        <h3>–û—Å–Ω–æ–≤–Ω–æ–π –≤–∏–¥ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h3>
                        <p>${companyData.data.okved || companyData.–û–ö–í–≠–î || '–ù–µ —É–∫–∞–∑–∞–Ω'}</p>
                    </div>
                    <div class="info-card">
                        <h3>–°—Ç–∞—Ç—É—Å</h3>
                        <p>${companyData.data.state?.status || companyData.–°–¢–ê–¢–£–° || '–î–µ–π—Å—Ç–≤—É—é—â–∞—è'}</p>
                    </div>
                </div>
                
                <div class="risks-section">
                    <h2>–û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤</h2>
                    ${generateRiskAssessment(companyData, reliability)}
                </div>
            `;
            
            resultsSection.style.display = 'block';
        }
        
        function calculateReliability(companyData) {
            // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ü–µ–Ω–∫–∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º
            
            const status = companyData.data.state?.status;
            const registrationDate = companyData.data.state?.registration_date;
            
            if (status && status !== 'ACTIVE') {
                return 'low';
            }
            
            if (registrationDate) {
                const regDate = new Date(registrationDate);
                const yearsDiff = (new Date() - regDate) / (1000 * 60 * 60 * 24 * 365);
                
                if (yearsDiff > 3) return 'high';
                if (yearsDiff > 1) return 'medium';
            }
            
            return 'medium';
        }
        
        function generateRiskAssessment(companyData, reliability) {
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–º–ø–∞–Ω–∏–∏
            let risksHTML = '';
            
            if (reliability === 'high') {
                risksHTML = `
                    <div class="risk-item risk-low">
                        <div class="risk-icon">‚úì</div>
                        <div>–ö–æ–º–ø–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤—É–µ—Ç –±–æ–ª–µ–µ 3 –ª–µ—Ç</div>
                    </div>
                    <div class="risk-item risk-low">
                        <div class="risk-icon">‚úì</div>
                        <div>–ù–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –ø—Ä–æ–±–ª–µ–º —Å –Ω–∞–ª–æ–≥–æ–≤–æ–π –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é</div>
                    </div>
                `;
            } else if (reliability === 'medium') {
                risksHTML = `
                    <div class="risk-item risk-low">
                        <div class="risk-icon">‚úì</div>
                        <div>–ö–æ–º–ø–∞–Ω–∏—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞</div>
                    </div>
                    <div class="risk-item risk-medium">
                        <div class="risk-icon">!</div>
                        <div>–ù–µ–±–æ–ª—å—à–æ–π —Å—Ä–æ–∫ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏</div>
                    </div>
                `;
            } else {
                risksHTML = `
                    <div class="risk-item risk-high">
                        <div class="risk-icon">‚ö†</div>
                        <div>–ö–æ–º–ø–∞–Ω–∏—è –∏–º–µ–µ—Ç –Ω–µ–¥–µ–π—Å—Ç–≤—É—é—â–∏–π —Å—Ç–∞—Ç—É—Å</div>
                    </div>
                    <div class="risk-item risk-high">
                        <div class="risk-icon">‚ö†</div>
                        <div>–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –ø—Ä–∏ –∑–∞–∫–ª—é—á–µ–Ω–∏–∏ –¥–æ–≥–æ–≤–æ—Ä–æ–≤</div>
                    </div>
                `;
            }
            
            return risksHTML;
        }
        
        function showError(message) {
            const resultsSection = document.getElementById('results');
            resultsSection.innerHTML = `
                <div class="error-message">
                    <h3>–û—à–∏–±–∫–∞</h3>
                    <p>${message}</p>
                </div>
            `;
            resultsSection.style.display = 'block';
        }
    </script>
</body>
</html>
